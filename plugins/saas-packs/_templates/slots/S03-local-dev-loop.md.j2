---
name: {{ company }}-local-dev-loop
description: |
  Set up {{ display_name }} local development workflow with hot reload and testing.
  Use when configuring a reproducible development environment.
  Trigger with phrases like "{{ company }} dev setup", "{{ company }} local development",
  "{{ company }} dev environment", "develop with {{ company }}".
allowed-tools: Read, Write, Edit, Bash({{ company }}:*)
version: 1.0.0
license: MIT
author: Jeremy Longshore <jeremy@intentsolutions.io>
---

# {{ display_name }} Local Dev Loop

## Overview
Set up a fast, reproducible local development workflow for {{ display_name }}.

## Prerequisites
- Completed `{{ company }}-install-auth` setup
- Node.js 18+ or Python 3.10+
- Package manager (npm, pnpm, or pip)

## Instructions

### Step 1: Create Project Structure
```
my-{{ company }}-project/
├── src/
│   ├── {{ company }}/
│   │   ├── client.ts       # {{ display_name }} client wrapper
│   │   ├── config.ts       # Configuration management
│   │   └── utils.ts        # Helper functions
│   └── index.ts
├── tests/
│   └── {{ company }}.test.ts
├── .env.local              # Local secrets (git-ignored)
├── .env.example            # Template for team
└── package.json
```

### Step 2: Configure Environment
```bash
# Copy environment template
cp .env.example .env.local

# Install dependencies
{{ package_manager | default('npm') }} install

# Start development server
{{ package_manager | default('npm') }} run dev
```

### Step 3: Set Up Hot Reload
```json
// package.json scripts
{
  "scripts": {
    "dev": "tsx watch src/index.ts",
    "test": "vitest",
    "test:watch": "vitest --watch"
  }
}
```

### Step 4: Configure Testing
```typescript
import { describe, it, expect, vi } from 'vitest';
import { {{ client_class | default(display_name + 'Client') }} } from '../src/{{ company }}/client';

describe('{{ display_name }} Client', () => {
  it('should initialize with API key', () => {
    const client = new {{ client_class | default(display_name + 'Client') }}({ apiKey: 'test-key' });
    expect(client).toBeDefined();
  });
});
```

## Output
- Working development environment with hot reload
- Test suite configured and passing
- Environment variables properly isolated
- Mock responses for offline development

## Error Handling

| Error | Cause | Solution |
|-------|-------|----------|
| .env not found | Missing configuration | Copy `.env.example` to `.env.local` |
| Test failures | Mock not configured | Set up mocks in test setup file |
| Hot reload broken | File watcher issue | Restart dev server |
| Import errors | TypeScript paths | Check `tsconfig.json` paths |

## Examples

### Mock Responses for Testing
```typescript
vi.mock('{{ npm_package | default(company + '-sdk') }}', () => ({
  {{ client_class | default(display_name + 'Client') }}: vi.fn().mockImplementation(() => ({
    // Mock methods here
  })),
}));
```

### Environment Validation
```typescript
// src/{{ company }}/config.ts
import { z } from 'zod';

const configSchema = z.object({
  {{ company | upper }}_API_KEY: z.string().min(1),
});

export const config = configSchema.parse(process.env);
```

## Resources
- [{{ display_name }} Local Development Guide]({{ docs_url | default('https://docs.' + company + '.com') }}/local-dev)
- [Vitest Documentation](https://vitest.dev/)
- [tsx Documentation](https://github.com/esbuild-kit/tsx)

## Next Steps
- Use `DEBUG={{ company | upper }}=*` for verbose logging
- Check {{ display_name }} dashboard for request logs
- Use `{{ company }}-debug-bundle` skill for evidence collection
- See `{{ company }}-sdk-patterns` for production-ready code patterns
