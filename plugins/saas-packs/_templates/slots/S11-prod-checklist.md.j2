---
name: {{ company }}-prod-checklist
description: |
  Deploy {{ display_name }} integrations to production with confidence.
  Use when preparing for production deployment or go-live.
  Trigger with phrases like "{{ company }} production", "deploy {{ company }}",
  "{{ company }} go-live", "{{ company }} launch checklist".
allowed-tools: Read, Bash({{ company }}:*), Grep
version: 1.0.0
license: MIT
author: Jeremy Longshore <jeremy@intentsolutions.io>
---

# {{ display_name }} Production Checklist

## Overview
Complete checklist for deploying {{ display_name }} integrations to production.

## Prerequisites
- All development and testing complete
- {{ company }}-security-basics implemented
- Access to production environment
- Rollback plan documented

## Instructions

### Step 1: Configuration Verification
- [ ] Production API keys in secure vault (not .env files)
- [ ] Environment variables set in deployment platform
- [ ] API key scopes are minimal (least privilege)
- [ ] Webhook endpoints configured with HTTPS
- [ ] Webhook secrets stored securely

### Step 2: Code Quality Verification
- [ ] All tests passing (`npm test`)
- [ ] No hardcoded credentials
- [ ] Error handling covers all {{ display_name }} error types
- [ ] Rate limiting/backoff implemented
- [ ] Logging is production-appropriate (no sensitive data)

### Step 3: Infrastructure Verification
- [ ] Health check endpoint includes {{ display_name }} connectivity
- [ ] Monitoring/alerting configured for {{ display_name }} errors
- [ ] Circuit breaker pattern for external API calls
- [ ] Graceful degradation if {{ display_name }} is unavailable

### Step 4: Deploy and Validate
```bash
# Pre-flight checks
curl -f https://staging.example.com/health
curl -s {{ status_url | default('https://status.' + company + '.com') }}

# Deploy
kubectl apply -f k8s/production.yaml
kubectl get pods -l app={{ company }}-integration

# Validate
kubectl logs -l app={{ company }}-integration --since=5m | grep -i error
```

## Output
- Production deployment completed successfully
- Health check endpoint reporting healthy
- Monitoring alerts configured and tested
- Rollback procedure documented and tested

## Error Handling

| Error | Cause | Solution |
|-------|-------|----------|
| Health check failed | {{ display_name }} connectivity | Check API status, verify credentials |
| Pod crash loop | Missing environment variables | Verify all required env vars are set |
| 5xx errors after deploy | Code regression | Execute rollback procedure |
| Alert storms | Monitoring misconfigured | Tune alert thresholds |

## Examples

### Health Check Implementation
```typescript
async function healthCheck(): Promise<{
  status: 'healthy' | 'degraded' | 'unhealthy';
  {{ company }}: { connected: boolean; latencyMs: number };
}> {
  const start = Date.now();
  try {
    await {{ company }}Client.ping();
    return {
      status: 'healthy',
      {{ company }}: { connected: true, latencyMs: Date.now() - start },
    };
  } catch (error) {
    return {
      status: 'degraded',
      {{ company }}: { connected: false, latencyMs: Date.now() - start },
    };
  }
}
```

### Rollback Procedure
```bash
# 1. Disable feature flag
curl -X POST https://api.featureflags.com/disable/{{ company }}-integration

# 2. Revert to previous deployment
kubectl rollout undo deployment/{{ company }}-integration

# 3. Verify rollback
kubectl rollout status deployment/{{ company }}-integration
```

### Monitoring Alerts

| Alert | Condition | Severity |
|-------|-----------|----------|
| {{ display_name }} API Down | 5xx errors > 10/min | P1 |
| High Latency | p99 > {{ latency_threshold | default('5000') }}ms | P2 |
| Rate Limited | 429 errors > 5/min | P2 |
| Auth Failures | 401/403 errors > 0 | P1 |

## Resources
- [{{ display_name }} Status Page]({{ status_url | default('https://status.' + company + '.com') }})
- [Deployment Best Practices]({{ docs_url | default('https://docs.' + company + '.com') }}/deployment)
- [Incident Response Guide]({{ docs_url | default('https://docs.' + company + '.com') }}/incidents)

## Next Steps
For version upgrades, see `{{ company }}-upgrade-migration`.
