sequenceDiagram
    participant U as User
    participant R as Router<br/>(Claude Code)
    participant SK as Skill
    participant SH as Shell/Runtime
    participant FS as Filesystem

    U->>R: User request
    Note over R: Match request to best skill<br/>(name + description)
    R->>SK: Activate skill

    Note over SK: Progressive disclosure:<br/>Load SKILL.md body
    SK->>FS: Read ONLY necessary files<br/>(avoid loading all context)
    FS-->>SK: File contents

    Note over SK: Parse instructions,<br/>prepare script execution
    SK->>SH: Execute script via<br/>${CLAUDE_PLUGIN_ROOT}/scripts/tool.py
    SH-->>SK: stdout/stderr + exit code

    Note over SK: Format output<br/>(JSON/Markdown/structured)
    SK-->>R: Structured result
    R-->>U: Response + next action
